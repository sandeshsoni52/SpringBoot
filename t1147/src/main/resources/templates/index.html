<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Dynamic Dropdown</title>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            fetchLevel();

            document.getElementById("levelDropdown").addEventListener("change", function() {
                fetchFaculty(this.value);
            });

            document.getElementById("facultyDropdown").addEventListener("change", function() {
                fetchInstituteMIXDegree(document.getElementById("levelDropdown").value, this.value);
            });
        });

        function fetchLevel() {
            fetch("/api/courses/levels")
                .then(response => response.json())
                .then(data => {
                    let dropdown = document.getElementById("levelDropdown");
                    dropdown.innerHTML = `<option value="">Select LEVEL</option>`;
                    data.forEach(category => {
                        dropdown.innerHTML += `<option value="${category}">${category}</option>`;
                    });
                });
        }

        function fetchFaculty(category) {
            if (!category) return;
            fetch(`/api/courses/faculties/${category}`)
                .then(response => response.json())
                .then(data => {
                    let dropdown = document.getElementById("facultyDropdown");
                    dropdown.innerHTML = `<option value="">Select FACULTY</option>`;
                    data.forEach(faculty => {
                        dropdown.innerHTML += `<option value="${faculty}">${faculty}</option>`;
                    });
                    document.getElementById("courseDropdown").innerHTML = `<option value="">Select Course</option>`;
                });
        }

        function fetchInstituteMIXDegree(category, faculty) {
            if (!category || !faculty) return;
            fetch(`/api/courses/courses/${category}/${faculty}`)
                .then(response => response.json())
                .then(data => {
                    let dropdown = document.getElementById("courseDropdown");
                    dropdown.innerHTML = `<option value="">Select INSTITUTE</option>`;
                    data.forEach(course => {
                        dropdown.innerHTML += `<option value="${course}">${course}</option>`;
                    });
                });
        }
    </script>
</head>
<body>
<h2>Dynamic Dropdown1437</h2>

<select id="levelDropdown"><option>Select Level</option></select>
<select id="facultyDropdown"><option>Select Faculty</option></select>
<select id="courseDropdown"><option>Select Institute</option></select>
<select id="courseDropdown"><option>Select Degree</option></select>

</body>
</html>
